<?xml version="1.0" encoding="EUC-KR"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.asia.ProductShipment.login.dao.LoginDao">
	<resultMap type="com.asia.ProductShipment.login.Login" id="loginLogResultMap">
		<result property="logID" 		column="logID" />
		<result property="cust_code" 	column="cust_code" />
		<result property="cust_nm" 		column="cust_nm" />
		<result property="regDate" 		column="regDate" />
		<result property="ipAddr" 		column="ipAddr" />
		<result property="logType" 		column="logType" />
	</resultMap>
	
	<select id="loginLogMaxID" resultType="Integer">
    	select IFNULL(MAX(logID)+1,1) logID
		  from loginLog
    </select>
    
    <select id="loginLogList" parameterType="com.asia.ProductShipment.login.Login" resultMap="loginLogResultMap">
    	SELECT logID, cust_code, cust_nm, regDate, ipAddr, logType
		  FROM loginLog
		 WHERE cust_code = #{cust_code}
	  ORDER BY regDate DESC
	     LIMIT 0,100
    </select>
    
	<insert id="insertLoginLog">
		INSERT INTO loginLog
    		(logID,		cust_code,		cust_nm,		regDate,		ipAddr,		logType)
    	VALUES
    		(#{logID},	#{cust_code},	#{cust_nm},		SYSDATE(),		#{ipAddr},	#{logType})
	</insert>
</mapper>