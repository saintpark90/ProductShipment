<?xml version="1.0" encoding="EUC-KR"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.asia.ProductShipment.board.dao.BoardDao">
	<resultMap type="com.asia.ProductShipment.board.Board" id="boardResultMap">
		<result property="noticeID" column="noticeID" />
		<result property="title" column="title" />
		<result property="body" column="body" />
		<result property="writer" column="writer" />
		<result property="regDate" column="regDate" />
		<result property="coView" column="coView" />
		<result property="isImportant" column="isImportant" />
		<result property="always" column="always" />
		<result property="startDate" column="startDate" />
		<result property="endDate" column="endDate" />
		<result property="importantAlways" column="importantAlways" />
		<result property="importantStartDate" column="importantStartDate" />
		<result property="importantEndDate" column="importantEndDate" />
	</resultMap>
	
	<select id="boardList" parameterType="com.asia.ProductShipment.board.Board" resultMap="boardResultMap">
         SELECT 
         	noticeID,
         	title,
         	body,
         	writer,
         	DATE_FORMAT(regDate,'%Y-%m-%d') regDate,
         	coView,
         	isImportant,
         	always,
         	startDate,
         	endDate,
         	importantAlways,
         	importantStartDate,
         	importantEndDate
         FROM
         	notice
    </select>
    
    <select id="pageNum" parameterType="com.asia.ProductShipment.board.Board" resultType="String">
         SELECT 'board' title
    </select>
    
    <select id="boardDetail" parameterType="com.asia.ProductShipment.board.Board" resultMap="boardResultMap">
         SELECT 
         	noticeID,
         	title,
         	body,
         	writer,
         	DATE_FORMAT(regDate,'%Y-%m-%d') regDate,
         	coView,
         	isImportant,
         	always,
         	startDate,
         	endDate,
         	importantAlways,
         	importantStartDate,
         	importantEndDate
         FROM
         	notice
         WHERE
            noticeID = #{noticeID}
    </select>
    
    <select id="boardMaxID" resultType="Integer">
    	select IFNULL(MAX(noticeID)+1,1) noticeID
		  from notice
    </select>
    
    <insert id="boardInsert" parameterType="com.asia.ProductShipment.board.Board">
    	INSERT INTO notice (
			noticeID,
			title,
			body,
			writer,
			regDate,
			coView,
			isImportant,
			always,
			startDate,
			endDate,
			importantAlways,
			importantStartDate,
			importantEndDate)
		VALUES(
			#{noticeID},
			#{title},
			#{body},
			#{writer},
			NOW(),
			0,
			0,
			0,
			DATE_FORMAT(NOW(),'%Y-%m-%d'),
			DATE_FORMAT('4712-12-31','%Y-%m-%d'),
			0,
			DATE_FORMAT(NOW(),'%Y-%m-%d'),
			DATE_FORMAT(NOW(),'%Y-%m-%d')
		)
    </insert>
    
    <update id="boardUpdate" parameterType="com.asia.ProductShipment.board.Board">
    	UPDATE 
    		notice
    	SET
    		title = #{title},
    		body = #{body},
    		regDate = NOW()
    	WHERE
    		noticeID = #{noticeID}
    </update>
    
    <delete id="boardDelete" parameterType="com.asia.ProductShipment.board.Board">
    	DELETE FROM 
    		notice
    	WHERE 
    		noticeID = #{noticeID}
    </delete>
</mapper>